<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test GitHub Pages URL</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #0052a3;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>üîç GitHub Pages URL Tester</h1>
    <p>This will test if your GitHub Pages URLs are working correctly.</p>

    <div class="test-box">
        <h2>Test 1: Fetch update.json</h2>
        <button onclick="testUpdateJson()">Test update.json</button>
        <div id="result1"></div>
    </div>

    <div class="test-box">
        <h2>Test 2: Check APK URL</h2>
        <button onclick="testApkUrl()">Test APK URL</button>
        <div id="result2"></div>
    </div>

    <div class="test-box">
        <h2>Test 3: Open URLs in Browser</h2>
        <button onclick="window.open('https://mikuare.github.io/qmaz-project-update/update.json', '_blank')">
            Open update.json
        </button>
        <button onclick="window.open('https://mikuare.github.io/qmaz-project-update/app-release.apk', '_blank')">
            Open APK URL
        </button>
    </div>

    <script>
        const UPDATE_JSON_URL = 'https://mikuare.github.io/qmaz-project-update/update.json';
        const APK_URL = 'https://mikuare.github.io/qmaz-project-update/app-release.apk';

        async function testUpdateJson() {
            const resultDiv = document.getElementById('result1');
            resultDiv.innerHTML = '<div class="result info">‚è≥ Testing...</div>';

            try {
                console.log('Fetching:', UPDATE_JSON_URL);
                
                const response = await fetch(UPDATE_JSON_URL, {
                    cache: 'no-store',
                    headers: {
                        'Cache-Control': 'no-cache'
                    }
                });

                console.log('Response:', response);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                console.log('Data:', data);

                resultDiv.innerHTML = `
                    <div class="result success">
                        <strong>‚úÖ SUCCESS!</strong><br><br>
                        <strong>Status:</strong> ${response.status} ${response.statusText}<br>
                        <strong>Version Code:</strong> ${data.versionCode}<br>
                        <strong>Latest Version:</strong> ${data.latestVersion}<br>
                        <strong>APK URL:</strong> ${data.apkUrl}<br>
                        <strong>Changelog:</strong><br>${data.changelog}<br><br>
                        <strong>Full Response:</strong><br>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                console.error('Error:', error);
                resultDiv.innerHTML = `
                    <div class="result error">
                        <strong>‚ùå FAILED!</strong><br><br>
                        <strong>Error:</strong> ${error.message}<br><br>
                        <strong>Possible causes:</strong><br>
                        ‚Ä¢ GitHub Pages not deployed yet (wait 2-3 minutes)<br>
                        ‚Ä¢ File doesn't exist at that URL<br>
                        ‚Ä¢ Repository settings: Pages not enabled<br>
                        ‚Ä¢ Wrong repository name or URL<br><br>
                        <strong>Check:</strong><br>
                        1. Go to GitHub repository settings<br>
                        2. Click "Pages" in left sidebar<br>
                        3. Make sure it says "Your site is live at..."<br>
                        4. Make sure update.json exists in the repository<br>
                    </div>
                `;
            }
        }

        async function testApkUrl() {
            const resultDiv = document.getElementById('result2');
            resultDiv.innerHTML = '<div class="result info">‚è≥ Testing...</div>';

            try {
                console.log('Fetching:', APK_URL);
                
                const response = await fetch(APK_URL, {
                    method: 'HEAD', // Just check if it exists, don't download
                    cache: 'no-store'
                });

                console.log('Response:', response);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const contentType = response.headers.get('content-type');
                const contentLength = response.headers.get('content-length');

                resultDiv.innerHTML = `
                    <div class="result success">
                        <strong>‚úÖ APK URL IS ACCESSIBLE!</strong><br><br>
                        <strong>Status:</strong> ${response.status} ${response.statusText}<br>
                        <strong>Content Type:</strong> ${contentType || 'N/A'}<br>
                        <strong>File Size:</strong> ${contentLength ? (contentLength / 1024 / 1024).toFixed(2) + ' MB' : 'N/A'}<br>
                        <strong>URL:</strong> ${APK_URL}<br><br>
                        ‚úÖ This URL can be used for downloads!
                    </div>
                `;
            } catch (error) {
                console.error('Error:', error);
                resultDiv.innerHTML = `
                    <div class="result error">
                        <strong>‚ùå APK URL NOT ACCESSIBLE!</strong><br><br>
                        <strong>Error:</strong> ${error.message}<br><br>
                        <strong>This means:</strong><br>
                        ‚Ä¢ The APK file doesn't exist at this URL<br>
                        ‚Ä¢ GitHub Pages hasn't deployed yet<br>
                        ‚Ä¢ Wrong filename (check for spaces!)<br><br>
                        <strong>Expected file:</strong> app-release.apk<br>
                        <strong>Location:</strong> Root of repository<br>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>

